# Setting up a SQL Database

## Introduction

In this section, we will download and install a SQL Database called: PostgreSQL.  We provide an optional 40,000 foot view section on SQL Databases (specifically PostgreSQL).  This focuses on SQL Databases as software and how they interact with hardware. 

## Database Dialects

For this course, I choose to use PostgreSQL.  PostgreSQL is one of many SQL Database products (often called a SQL Dialect).  A few common examples are:

Open Source (free to download and use):
* PostgreSQL
* MySQL
* SQLite

Close Source (pay a license to use, might have a limited free version):
* Oracle
* Microsoft SQL Server
* IBM Db2

This list is non-exhaustive.  Each of the above products is managed by a different team(s).  Each team manages it's own SQL Database product and implements that product in a different way (they are separate codebases).  This means that SQL that runs in PostgreSQL might not run in SQLite.  It also means that PostgreSQL internal system will look markedly different from say MySQL.

Lucky for us, the community that designs SQL Databases has created a basic subset of SQL that runs on all SQL Databases.  This is called the ANSI SQL Standard.  Most of this course will cover this standard version of SQL.  We might encounter Postgres-specific SQL especially when dealing with dates and string data types (data types explained later).

## Database Versions

All of the above Databases are actively improving their product.  Every few months they release a new version of the database with improved features.  They typically signify this with version numbers: x.y.z.  The version numbers are explained below:

x => major version number.  Upgrading to a higher version number might require you to adapt your SQL/database beforehand.
y => minor version number.  These are incremental upgrades that usually don't require any changes to your SQL/Database.
z => security version number.  These are incremental upgrades that patch vulnerabities in your system.

ANSI SQL tends to work across all versions.  So we aren't sensitive to PostgreSQL version.  It's worth being aware of database versions when dealing with more advanced SQL features.  Sometimes the SQL Database version dictates what SQL or database features you can use.

Upgrading databases to new versions can go from mundane to complicated depending on a variety of factors.  I would not advice upgrading an important SQL database without Database Administration experience.

## Downloading PostgreSQL

Here are the steps to download PostgreSQL:
1. Go to the following website: https://www.postgresql.org/download/
2. Find the section called: "Packages and Installers", click the icon associated with your operating system.  For Linux users, you might have to click multiple buttons to get to your version of Linux (ubuntu, debian etc).
3. For Linux users follow the instructions to install PostgreSQL (you are done, skip step 4).  For Windows and MacOS users, just click the download button associated with the most recent version of PostgreSQL.  That would be the one with the higest version number.
4. Go to your download folder.  Double click on the file you just downloaded from the PostgreSQL website.  
5. This will launch an installer.  Click next on all buttons except for the username and password section.  Feel free to add a username and password for the super user.  You basically want to accept most defaults since they are reasonable.
6. You will get to the finish screen.  There will see a checkbox that says something like "launch stack builder".  Make sure that is unchecked and then click finished.  Stack builder let's you install other tools for PostgreSQL.  We are doing a basic tutorial and don't need any extra tools.

## Downloading the PosgreSQL Client: PgAdmin4

The previous PostgreSQL installer should have downloaded and installed PgAdmin4 during the install process.  Use the search button on your computer to check.  

If it did not download PgAdmin4, go to this website: https://www.pgadmin.org/download/, click your operating system, click the most recent version of PgAdmin4 and then click on the relevant executable/dmg file.  For MacOSX, you will have to know if your CPU is arm or x86 chip to determine the correct file to download.  You can find this out by launching the terminal app and typing: uname -p.  It will print out either x86_64 or arm64.  Download the corresponding file.  Windows should only have an .exe version of the file.  Click the executable/dmg file to install it.  Click next and accept all terms that are required.  The defaults are perfectly fine for this tutorial.

## What did we just install?
```
+------------+          network           +--------------+
| SQL Client | -------------------------> | SQL Database |
+------------+                            +--------------+
```
PgAdmin4 is the SQL Client in our diagram.  PostgreSQL is our SQL Database.  SQL Client fetches data or sends SQL commands to the SQL Database through a network connection.  We will specify what that means in the next section.  

The SQL client's role is to help humans communicate with SQL databases.  It can send SQL over a network to a SQL Database on a human's behalf.  It can format the output and feedback from the database for human's to consume.  It does not: interpret or execute SQL. It does not: create, read, modify, delete or store data.  That's the SQL database's job.  The SQL Client might send out SQL automatically during certain events like first connecting with a database to improve a human user's situational awareness.  It can also send SQL that a human has crafted.  A SQL Client can save the network connection information and interact with many databases.  It almost always resides on a personal computer or laptop.

The SQL Database is the heart of the operation.  It listens for incoming connections, retrieves the SQL, interprets the SQL, executes the SQL, manages, stores, creates, reads, modifies and deletes the data.  End users typically don't interact with it directly.  They interact with it through a network connection.

## How does the server work?
```
     network
        |
        |
        v
     +-------------------------+
     |          computer       |
     |                         |
     |   +-------------+       |
     |   |    port     |       |
     |   +-------------+       |
     |          |              |
     |          v              |
     |   +-------------+       |
     |   | SQL Database|       |
     |   +-------------+       |
     |          |              |
     |          v              |
     |   +-------------+       |
     |   | data storage|       |
     |   +-------------+       |
     |                         |
     +-------------------------+
```

We go into a bit more depth about SQL Databases.  A SQL Database is a software system that resides on a computer and manages data.  Most SQL Databases listen for incoming SQL commands by binding to and listening for incoming network connections on a numbered port.  PostgreSQL port is 5432.  The SQL client will bind to port 5432 and pass the SQL command to the SQL Database.  This is how a SQL Client or any client really communicates with our SQL Database.  

What is a port?  Computers often have multiple programs listening for incoming network connections.  So each application is assigned a pre-determined port.  That way it only gets messages intended for it.  It doesn't have to sift through all incoming network connections.  MySQL another SQL Database uses port 3306.  Non-database examples including: sendng email 25, remote login 22 for linux and 3389 for windows and websites either 80 or 443.

By using ports, SQL clients and other clients (think web application) can connect to the database from different network locations and still interact with it.  This also means that multiple people or applications can use a database simultaneously (we call this concurrently in computer science).  This explains why SQL databases are often used for e-commerce websites where multiple shoppers might be adding products to their shopping cart or making purchases.

In our current set-up, we downloaded both SQL Client and SQL Database to our laptop or personal computer.  The PostgreSQL database when started will listen to port 5432.  We can set-up our SQL Client to listen to send messages to our own computer by using the term localhost combined with port 5432.  We will explain this in an upcoming session.

## How to start and connect to our PostgreSQL database

Start PgAdmin4.  This is our SQLClient.  On the left panel, you will see an icon with Servers next to it.  Double click this.  You will see an elephant icon that says PostgreSQL <version_number>.  Double click it.  If you see an icon with Database next to it, you have successfully logged into your database.  Congrats!

If you don't see anything under Servers, you will have to start Postgres database.  If you added a username and password, clicking the PostgreSQL icon might prompt you for a username and password.

## Next Section

Before we send our first SQL command, we will cover how data is defined and then later created in a SQL Database.  During this process, we will create a database from scratch that we will later use for data analysis.  During the data creation process, we will explore what external processes create data.